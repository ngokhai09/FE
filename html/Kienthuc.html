<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cleverfood</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
        integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.css"
        integrity="sha512-yHknP1/AwR+yx26cB1y0cjvQUMvEa2PFzt1c9LlS4pRQ5NOTZFWbhBig+X9G9eYW/8m0/4OXNx8pxJ6z57x0dw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/KienThuc.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

</head>

<body>
    <!-- header -->
    <header>
        <div class="container d-flex align-items-center justify-content-between h-100">
            <div class="menu_main d-flex align-items-center justify-content-between">
                <div class="logo">
                    <a href="TrangChu.html">cleverfood</a>
                </div>
                <nav class="menu">
                    <ul class="d-flex align-items-center ">
                        <li class="active"><a href="TrangChu.html">Trang chủ</a></li>
                        <li><a href="GioiThieu.html">Giới thiệu</a></li>
                        <li class="menu1">
                            <a href="CuaHang.html">cửa hàng</a>
                            <i class="fa-solid fa-angle-down"></i>
                            <ul class="menu2">
                                <li><a href="#">Rau củ</a></li>
                                <li><a href="#">Trái cây</a></li>
                                <li><a href="#">Đồ uống</a></li>
                                <li><a href="#">Đồ khô</a></li>
                            </ul>
                        </li>
                        <li><a href="Kienthuc.html">kiến thức</a></li>
                        <li><a href="LienHe.html">Liên hệ</a></li>
                    </ul>
                </nav>
                <ul class="header__icon d-flex align-items-center ">
                    <li><i class="fa-solid fa-magnifying-glass icon-search"></i></li>
                    <li id="loginIcon"> <i class="fa-solid fa-user icon-login" ></i></li>
                    <li> <a href="GioHang.html">
                            <i class="fa-solid fa-cart-shopping icon-cart"></i>
                        </a>
                        <div class="cart">
                            <p>Chưa có sản phẩm nào</p>
                        </div>
                    </li>
                </ul>
            </div>

        </div>
    </header>
    <!-- search login cart -->
    <div class="modalShow">
        <div class="overlay"></div>
        <div class="modal__search">
            <div class="overlay"></div>
            <input type="text" placeholder="Tìm kiếm...">
            <i class="fa-solid fa-magnifying-glass"></i>
        </div>
        <div class="modal__login" id="dangnhap">
            <h3 id="login">Đăng nhập</h3>
            <div class="login__input">
                <p>Tên tài khoản hoặc địa chỉ email <sup>*</sup></p>
                <input type="text" name="" id="username_login">
            </div>
            <div class="login__input">
                <p>Mật khẩu <sup>*</sup> </p>
                <input type="text" name="" id="password_login">
            </div>
            <div class="button d-flex justify-content-start">
                <button class="btnlogin colormain" onclick="login()">đăng nhập</button>
                <button class="btnregis colorgray">đăng ký</button>
            </div>
        </div>
        <div class="modal__register" id="register">
            <h3>Đăng ký</h3>
            <div class="register__input">
                <p>Họ và tên <sup>*</sup></p>
                <input type="text" name="" id="name">
            </div>
            <div class="register__input">
                <p>Tên tài khoản hoặc địa chỉ email <sup>*</sup></p>
                <input type="text" name="" id="username">
            </div>
            <div class="register__input">
                <p>Mật khẩu <sup>*</sup> </p>
                <input type="password" name="" id="password">
            </div>
            <div class="register__input">
                <p>Tuổi <sup>*</sup> </p>
                <input type="text" name="" id="age">
            </div>
            <div class="register__input">
                <p>Số điện thoại <sup>*</sup> </p>
                <input type="text" name="" id="phoneNumber">
            </div>
            <div class="register__input">
                <p>Địa chỉ <sup>*</sup> </p>
                <input type="text" name="" id="address">
            </div>
            <div class="button d-flex">
                <button class="btnregis colormain" onclick="register()">đăng ký</button>
                <button class="btnlogin colorgray">đăng nhập</button>
            </div>
        </div>
        <i class="fa-solid fa-xmark close-search"></i>
    </div>
    <!-- main -->
    <section>
        <div class="container">
            <h2>KIẾN THỨC</h2>
            <div class="row main">
                <div class="col-md-4 col-xl-3">
                    <div class="science__info">
                        <div class="science__search d-flex justify-content-start align-items-center">
                            <input type="text" placeholder="Tìm kiếm...">
                            <button>
                                <i class="fa-solid fa-magnifying-glass"></i>
                            </button>
                        </div>
                    </div>
                    <div class="science__news">
                        <p>Bài viết mới</p>
                        <ul id="new">


                            <li>
                                <a href="#">
                                    <div class="science__news__img">
                                        <img src="../img/new1.jpg" alt="">
                                    </div>
                                    <p>Nấm vân chi có tác dụng gì?</p>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="science__news__img">
                                        <img src="../img/new1.jpg" alt="">
                                    </div>
                                    <p>Nấm vân chi có tác dụng gì?</p>
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    <div class="science__news__img">
                                        <img src="../img/new1.jpg" alt="">
                                    </div>
                                    <p>Nấm vân chi có tác dụng gì?</p>
                                </a>
                            </li>
                            
                        </ul>
                    </div>
                </div>
                <div class="col-md-8 col-xl-9">
                    <div class="row " id="news">


                    </div>
                </div>
            </div>
        </div>

    </section>
    <!-- footer -->
    <footer>
        <div class="desc">
            <h2>Đăng ký để nhận cập nhật</h2>
            <p>______________</p>
            <p>Để lại email để không bỏ lỡ bất kì ưu đãi nào</p>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-md-3 footer__item">
                    <div class="footer__logo">
                        <img src="../img/logo-new.png" alt="">
                    </div>
                    <p>Nhóm 6 - Thiết kế Web</p>
                    <p>123456789</p>
                    <p>nchieu2909@gmail.com</p>
                </div>
                <div class="col-md-3 footer__item">
                    <h4>menu</h4>
                    <ul>
                        <li><a href="TrangChu.html">Trang chủ</a></li>
                        <li><a href="GioiThieu.html">Giới thiệu</a></li>
                        <li><a href="CuaHang.html">Cửa hàng</a></li>
                        <li><a href="Kienthuc.html">Kiến thức</a></li>
                        <li><a href="LienHe.html">Liên hệ</a></li>
                    </ul>
                </div>
                <div class="col-md-3 footer__item">
                    <h4>SẢN PHẨM</h4>
                    <ul>
                        <li><a href="#">Rau củ</a></li>
                        <li><a href="#">Trái cây</a></li>
                        <li><a href="#">Đồ uống</a></li>
                        <li><a href="#">Đồ khô</a></li>
                    </ul>
                </div>
                <div class="col-md-3 footer__item">
                    <h4>INSTAGRAM</h4>
                    <p>Instagram did not return a 200.</p>
                </div>
            </div>
        </div>
        <div class="info ">
            <p> © Bản quyền thuộc về . Thiết kế website Nhóm 6</p>
        </div>
    </footer>
    <div id="ScrollTop" class="">
        <i class="fa-solid fa-angle-up"></i>
    </div>
    <div class="mb_menu">
        <div class="overlay"></div>
        <ul class="">
            <li class="active"><a href="TrangChu.html">Trang chủ</a></li>
            <li><a href="GioiThieu.html">Giới thiệu</a></li>
            <li class="menu1">
                <a href="javascript:void(0)">cửa hàng<i class="fa-solid fa-angle-down"></i></a>
            </li>
            <li>
                <ul class="mb-menu2">
                    <li><a href="#">Rau củ</a></li>
                    <li><a href="#">Trái cây</a></li>
                    <li><a href="#">Đồ uống</a></li>
                    <li><a href="#">Đồ khô</a></li>
                </ul>
            </li>
            <li><a href="Kienthuc.html">kiến thức</a></li>
            <li><a href="LienHe.html">Liên hệ</a></li>
        </ul>
        <i class="fa-solid fa-xmark close-search"></i>
    </div>

</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
    integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js"
    integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js"
    integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
    crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/slick-carousel/1.8.1/slick.min.js"
    integrity="sha512-XtmMtDEcNz2j7ekrtHvOVR4iwwaD6o/FUJe6+Zq+HgcCsk3kj4uSQQR8weQ2QVj1o0Pk6PwYLohm206ZzNfubg=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="../js/base.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

<script type="text/javascript">
    $(document).ready(function () {
        newProduct();
        newss();
    });
    function newProduct(){
        console.log("hello")
        $.ajax({
            url: 'http://127.0.0.1:8080/api/news',
            method: 'GET',
            contentType: 'json',
            dataType: 'json',
            error: function (response) {
            },
            success: function (reponse) {
                const len = reponse.length;
                let table = '';

                console.log(reponse);
                for (var i = 0; i < len; ++i) {

                    table = table + ' <div class="col-md-6 col-xl-4 mb-4"><a href="#" class="news_item"><div class="item__img">';
                    table = table + '<img src="../img/'+reponse[i].photo+'" alt="">';
                    table = table + '</div><div class="item_date"><p>16</p><span>Th5</span></div><div class="new_item__info">';
                    table = table + '<p>'+ reponse[i].description+'</p>';
                    // table = table + '<span>'+reponse[i].content+'</span>';
                    table = table +'</div> </a></div>';
                }
                $("#news").html(table);
            },
            fail: function (response) {
            }
        });
    }
    function newss(){
        $.ajax({
            url: 'http://127.0.0.1:8080/api/news',
            // headers: { 'Access-Control-Allow-Origin': '*' },
            method: 'GET',
            contentType: 'json',
            dataType: 'json',
            error: function (response) {
            },
            success: function (reponse) {
                const len = reponse.length;
                let table = '';

                console.log(reponse);
                for (var i = 0; i < len; ++i) {

                    table = table + ' <li><a href="#"><div class="science__news__img">';
                    table = table + '<img src="../img/'+reponse[i].photo+'" alt="">';
                    table = table + '</div>';
                    table = table + '<p>'+ reponse[i].description+'</p>';
                    // table = table + '<span>'+reponse[i].content+'</span>';
                    table = table +'</a></div></li>';
                }
                $("#new").html(table);
            },
            fail: function (response) {
            }
        });
    }
    function login(){
        $.ajax({
            url: 'http://127.0.0.1:8080/api/user/' + $("#username_login").val(),
            // headers: { 'Access-Control-Allow-Origin': '*' },
            method: 'GET',
            contentType: 'json',
            dataType: 'json',
            error: function (response) {
                $("#login").after("<p>"+response.responseText + "</p>")
            },
            success: function (reponse) {
                if(reponse.password === $("#password_login").val()){
                    alert("Login thanh cong");
                    localStorage.setItem("username", reponse.userName);
                    localStorage.setItem("name", reponse.name);
                    localStorage.setItem("diachi", reponse.address);
                    localStorage.setItem("sdt", reponse.phoneNumber);
                    $("#loginIcon").empty();
                    $("#loginIcon").html("<p>"+reponse.userName+"</p>");
                    $("#loginIcon").after('<li onclick="logout()" id="logout"><i class="fa fa-sign-out" aria-hidden="true" ></i></li>');

                }else{
                    $("#login").after("<p>Sai tên tài khoản hoặc mật khẩu</p>")
                }
            },
            fail: function (response) {
            }
        });

    }
    function logout(){
        $("#loginIcon").empty();
        $("#loginIcon").html('<i class="fa-solid fa-user icon-login" ></i>');
        $("#logout").remove();
    }
    function register(){
        data = {
            "name": $("#name").val(),
            "age": $("#age").val(),
            "phoneNumber": $("#phoneNumber").val(),
            "userName": $("#username").val(),
            "password": $("#password").val(),
            "address": $("#address").val()

        }
        $.ajax({
            url: 'http://127.0.0.1:8080/api/user',
            method: 'POST',
            contentType: 'json',
            dataType: 'json',
            data : JSON.stringify(data),
            error: function (response) {
                console.log(response)
                console.log(data)
            },
            success: function (reponse) {
                alert("Đăng ký thành công");
            },
            fail: function (response) {
            }
        });

    }
</script>
</html>